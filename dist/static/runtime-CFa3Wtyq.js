import{F as b,D as g,u as w,C as A,a as N,b as C}from"./client-C1icV2m4.js";var y=({children:i,fallback:h})=>{const l=b({children:i});return l[g]=(d,s)=>{if(!(d instanceof Promise))throw d;return d.finally(s),h},l};const S=(i,h)=>{let l=0;const d=async(t,a)=>{const n=a.childNodes[a.childNodes.length-1];n?.nodeName==="TEMPLATE"&&n?.getAttribute(C)!==null&&(t.children=await c(n.content.childNodes))},s=async t=>{const a={children:await c(t.childNodes)},n=t.attributes;for(let e=0;e<n.length;e++)a[n[e].name]=n[e].value;return i(t.nodeName,{key:++l,...a})},c=async t=>{const a=[];for(let n=0;n<t.length;n++){const e=t[n];if(e.nodeType!==8)if(e.nodeType===3)a.push(e.textContent);else if(e.nodeName==="TEMPLATE"&&e.id.match(/(?:H|E):\d+/)){const r=document.createElement("hono-placeholder");r.style.display="none";let f;const u=new Promise(o=>f=o);e.replaceWith=o=>{c(o.childNodes).then(f),r.remove()};let p=[];for(r.appendChild(e);n<t.length;n++){const o=t[n];if(o.nodeType===8){r.appendChild(o),n--;break}else o.nodeType===3?p.push(o.textContent):p.push(await s(o))}const m=document.querySelectorAll(`[data-hono-target="${e.id}"]`);if(m.length>0){const o=m[m.length-1];p=await c(o.content.childNodes)}if(p.length===0&&e.id.startsWith("E:")){let o;const T=new Promise(E=>o=E);p=await i(y,{fallback:[],children:[await i(()=>w(T),{})]}),r.insertBefore=E=>{c(E.childNodes).then(o)}}document.body.appendChild(r),a.push(await i(y,{fallback:p,children:[await i(()=>w(u),{})]}))}else{let r;const f=e.getAttribute(A);if(f&&(r=await h(f)),r){const u=JSON.parse(e.getAttribute(N)||"{}");await d(u,e),a.push(await i(r,{key:++l,...u}))}else a.push(await s(e))}}return a};return c},O=async i=>{const h=new Set,l=new Set;if(document.querySelectorAll('template[id^="H:"], template[id^="E:"]').forEach(s=>{s.parentElement&&(h.add(s),l.add(s.parentElement))}),l.size===0)return;const d=new MutationObserver(s=>{const c=new Set;s.forEach(t=>{t.target instanceof Element&&(c.add(t.target),t.removedNodes.forEach(a=>{h.delete(a)}))}),c.forEach(t=>{i(t)}),h.size===0&&d.disconnect()});l.forEach(s=>{d.observe(s,{childList:!0})})};export{S as buildCreateChildrenFn,O as hydrateComponentHonoSuspense};
